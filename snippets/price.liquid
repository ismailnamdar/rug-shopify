{%- assign echo = echo | default: true -%}
{% assign tag_compare_at_price = blank %}
{% for tag in product.tags %}
  {% assign tag_downcase = tag | downcase %}
  {% if tag_downcase contains "sale:" %}
    {% assign price_part = tag_downcase | remove: "sale:" | remove: "$" | strip | split: " " | first  %}
    {% assign text_part = tag_downcase | remove: "sale:" | remove: "$" | strip | remove: price_part  %}
    {% assign tag_compare_at_price = price_part | times: 100 %}
  {% endif %}
{% endfor %}

{%- if product != empty -%}
  {%- if tag_compare_at_price != blank -%}
    <span class="product__save">{{- product.price | money_without_trailing_zeros }}</span>
    <ins class="price__amount 1">
      <strong class="money" style="color: #f3576b">
        {{- tag_compare_at_price | money_without_trailing_zeros -}}
      </strong><!-- /.money -->
    </ins>
    <span style="color: #f3576b">SALE {% if text_part != blank %}{{text_part | upcase }}{% endif %} </span>

	{%- elsif product.compare_at_price != blank -%}

  <span class="product__save">{{- product.compare_at_price | money_without_trailing_zeros }}</span>
  <ins class="price__amount 2">
    <strong class="money" style="color: #f3576b">
      {{- product.price | money_without_trailing_zeros -}}
    </strong><!-- /.money -->
  </ins>
  <span style="color: #f3576b">SALE</span>

	{%- else -%}
		<span class="price__amount 3">
			<span class="money">
				{{- product.price | money_without_trailing_zeros -}}
			</span><!-- /.money -->
		</span>
	{%- endif -%}
{%- endif -%}