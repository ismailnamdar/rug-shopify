{%- comment -%}
  This is a required section for the Shopify Theme Store.
  It is available when you add "Newsletter" section on the Theme Editor.

  Theme Store required settings
  - Heading: title of the newsletter section
  - Subheading: description of the newsletter section
{%- endcomment -%}
<section>
  {% if section.settings.section_title != blank %}
    <label for="Email" class="h1">{{ section.settings.section_title | escape }}</label>
  {% endif %}
  {% if section.settings.subheading != blank %}
    <p>{{ section.settings.subheading | escape }}</p>
  {% endif %}

  {% form 'customer' %}
    {{ form.errors | default_errors }}
    {% if form.posted_successfully? %}
      <p>{{ 'general.newsletter_form.confirmation' | t }}</p>
    {% else %}
      <input type="hidden" name="contact[tags]" value="newsletter">
      <input type="email"
        name="contact[email]"
        id="Email"
        value="{% if customer.email != blank %}{{ customer.email }}{% endif %}"
        placeholder="Email address"
        autocorrect="off"
        autocapitalize="off">
      <button type="submit" name="commit" class="btn" id="Subscribe">
        <span>Subscribe</span>
      </button>
      {% if section.settings.note != blank %}
      <div class="newsletter-note"> 
        {{section.settings.note}}
      </div>
      {% endif %}
    {% endif %}
  {% endform %}
</section>

<style>
  .newsletter-section {
    padding: 3rem;
    background: #E4F4F6;
    margin-top: 3rem;
}

.newsletter-section .h1 {
    color: #F3576B;
    font-weight: 400;
    font-size: 32px;
    line-height: 36px;
    text-align: center;
}

.newsletter-section section {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.newsletter-section form {
    display: flex;
    flex-direction: column;
    width: 100%;
    align-items: center;
}

.newsletter-section form input[type="email"] {
    width: 100%;
    margin-bottom: 2rem;
    padding-top: 1rem;
    padding-bottom: 1rem;
    height: 56px;
    border: 1px solid #979797;
    display: inline-block;
    max-width: 520px;
}

.newsletter-note {
  font-size: 13px;
  margin-top: 1rem;
  text-align: center;
}

.newsletter-note a {
  text-decoration: underline;
}

.newsletter-section form input[type="submit"] {
    max-width: 200px;
}

.newsletter-section form button[type="submit"] {
    max-width: 230px;
    display: inline-block;
    margin: 0 auto;
    padding:  10px 30px;
    height: 50px;
    width: 100%;
}
@media screen and (max-width: 749px) {
  .newsletter-section .h1 {
    font-size: 18px;
    margin-bottom: 15px;
  }
}
</style>

{% schema %}
  {
    "name": "Newsletter",
    "class": "newsletter-section",
    "settings": [
      {
        "type": "text",
        "id": "section_title",
        "label": "Heading",
        "default": "Subscribe to our newsletter"
      },
      {
        "type": "text",
        "id": "subheading",
        "label": "Subheading",
        "default": "A short sentence describing what someone will receive by subscribing"
      },
      {
        "type": "richtext",
        "id": "note",
        "label": "Note"
      },
      {
        "type": "paragraph",
        "content": "Any customers who sign up will have an account created for them in Shopify. [View customers](/admin/customers?query=&accepts_marketing=1)"
      }
    ],
    "presets": [{
      "name": "Newsletter",
      "category": "Promotional"
    }]
  }
{% endschema %}
